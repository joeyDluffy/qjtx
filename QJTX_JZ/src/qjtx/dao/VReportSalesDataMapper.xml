<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qjtx.dao.VReportSalesDataMapper">

<resultMap id="OpResultMap" type="qjtx.pojo.VReportSalesDataForOp">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 12:12:33 CST 2016.
    -->
    <result column="cid" jdbcType="INTEGER" property="cid" />
    <result column="saleid" jdbcType="VARCHAR" property="saleid" />
    <result column="storename" jdbcType="VARCHAR" property="storename" />
    <result column="contact" jdbcType="VARCHAR" property="contact" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="productid" jdbcType="VARCHAR" property="productid" />
    <result column="floor" jdbcType="VARCHAR" property="floor" />
    <result column="saleday" jdbcType="DATE" property="saleday" />
    <result column="saletotal" jdbcType="DOUBLE" property="saletotal" />
    <result column="qty" jdbcType="INTEGER" property="qty" />
    <result column="imgfile" jdbcType="VARCHAR" property="imgfile" />
    <result column="reviewed" jdbcType="INTEGER" property="reviewed" />
  </resultMap>
      <sql id="op_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    cid, s.saleid,s.storename, s.contact, s.phone, s.productid,s.floor, saleday, saletotal, qty, imgfile, reviewed
  </sql>
      <select id="getOpReportData" parameterType="java.lang.String" resultMap="OpResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    select 
    <include refid="op_Column_List" />
    from salesdata_store s left join
	(select * from v_report_salesdata where saleday = #{saleday,jdbcType=DATE}) d 
    on s.saleid = d.saleid
    <where>
	    <if test="floor != null and floor != ''">
	    	s.floor = #{floor,jdbcType=VARCHAR}
	    </if>  
    </where>
  </select>
  
  
  
  <resultMap id="BaseResultMap" type="qjtx.pojo.VReportSalesData">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Nov 07 12:12:33 CST 2016.
    -->
    <result column="cid" jdbcType="INTEGER" property="cid" />
    <result column="saleid" jdbcType="VARCHAR" property="saleid" />
    <result column="storename" jdbcType="VARCHAR" property="storename" />
    <result column="contact" jdbcType="VARCHAR" property="contact" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="saleday" jdbcType="DATE" property="saleday" />
    <result column="saletotal" jdbcType="DOUBLE" property="saletotal" />
    <result column="qty" jdbcType="INTEGER" property="qty" />
    <result column="imgfile" jdbcType="VARCHAR" property="imgfile" />
    <result column="reviewed" jdbcType="INTEGER" property="reviewed" />
  </resultMap>
      <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    cid, saleid, storename, contact, phone,  saleday, saletotal, qty, imgfile, reviewed
  </sql>
      <select id="selectByDate" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from v_report_salesdata
    where saleday = #{saleday,jdbcType=DATE}
  </select>
  <select id="getAllReport" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from v_report_salesdata
  </select>
  
    <select id="getReviewedReportData" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Nov 03 00:43:08 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from v_report_salesdata
    where reviewed = 1
  </select>
</mapper>